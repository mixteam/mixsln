define("mix/core/base/message/1.0.0/message",["mix/core/base/reset/1.0.0/reset","mix/core/base/class/1.0.0/class"],function(e,t,n){e("mix/core/base/reset/1.0.0/reset");var r=e("mix/core/base/class/1.0.0/class"),i=/\s+/,s=/^\@([^:]+)/,o=0,u=r.create({initialize:function(e,t,n){var r=this;r.__msgObj={name:e||"anonymous",id:t||o++,cache:{},defaultContext:n||r}},on:function(e,t,n){var r=this,s=r.__msgObj.cache,o,u;if(!t)return r;e=e.split(i);while(o=e.shift())u=s[o]||(s[o]=[]),u.push(t,n);return r},off:function(e,t,n){var r=this,s=r.__msgObj.cache,o,u,a,f;if(!(e||t||n))return delete r.__msgObj.events,r;e=e?e.split(i):Object.keys(s);while(o=e.shift()){u=s[o];if(!u)continue;if(!t&&!n){delete s[o];continue}for(a=u.length-2;a>=0;a-=2)t&&u[a]!==t||n&&u[a+1]!==n||u.splice(a,2)}return r},__getCaches:function(e){var t=this,n=t.__msgObj.cache,r,i;return s.test(e)?r=n[e]:(r=[],i=new RegExp("^@[^\\:]+\\:"+e+"$"),Object.each(n,function(t,n){if(e===n||i.test(n))r=r.concat(t)})),r},has:function(e,t,n){var r=this,i=r.__msgObj.cache,s=r.__getCaches(e),o;if(!s)return!1;if(!t&&!n)return!0;for(o=s.length-2;o>=0;o-=2)if(!(t&&s[o]!==t||n&&s[o+1]!==n))return!0;return!1},once:function(e,t,n){function i(){t.apply(this,arguments),r.off(e,i,n)}var r=this;r.on(e,i,n)},trigger:function(e){var t=this,n=t.__msgObj.cache,r=t.__msgObj.defaultContext,s,o,u,a,f,l=[],c;e=e.split(i);for(a=1,f=arguments.length;a<f;a++)l[a-1]=arguments[a];while(s=e.shift()){t.log(s+":("+l.join(",")+")");if(o=n.all)o=o.slice();if(u=t.__getCaches(s))u=u.slice();if(u)for(a=0,f=u.length;a<f;a+=2)u[a].apply(u[a+1]||r,l);if(o){c=[s].concat(l);for(a=0,f=o.length;a<f;a+=2)o[a].apply(o[a+1]||r,c)}}return t},log:function(e){var t=this;console.log("[("+t.__msgObj.id+")"+t.__msgObj.name+"]"+e)}});u.mixTo=function(e){e=e.prototype||e;var t=Events.prototype;Object.extend(e,t)},u.spliterReg=i,u.atReg=s,u.singleton=new u("global"),n.exports=u});