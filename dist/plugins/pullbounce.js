(function(e,t){var n=e.document,o=(t.config,50);t.plugin.pullbounce={_options:null,_page:null,_pullType:!1,_onPullStart:function(){var e=this._page,t=this._options,n=e.el.parentNode;t.onPullDown&&(n.querySelector("#J_pullRefresh").style.visibility="visible"),t.onPullUp&&(n.querySelector("#J_pullUpdate").style.visibility="visible")},_onPullDown:function(e){var t=this._page,n=t.el.parentNode.querySelector("#J_pullRefresh span"),o=n.innerText;e>50&&"松开即刷新"!==o?n.innerText="松开即刷新":50>e&&"下拉可刷新"!==o&&(n.innerText="下拉可刷新")},_onPullUp:function(e){var t=this._page,n=t.el.parentNode.querySelector("#J_pullUpdate span"),o=n.innerText;e>50&&"松开即加载更多"!==o?n.innerText="松开即加载更多":50>e&&"上拉可加载更多"!==o&&(n.innerText="上拉可加载更多")},_onPullEnd:function(){t.scroll.refresh(),t.scroll.resumeBounce()},handleEvent:function(e){var n=this,i=this._page,a=this._options,r=t.scroll.getBoundaryOffset();"panstart"===e.type?this._onPullStart():"pulldown"===e.type?(this._pullType=r>o?"PullDown":!1,this._onPullDown(r)):"pullup"===e.type?(this._pullType=r>o?"PullUp":!1,this._onPullUp(r)):"panend"===e.type&&r&&this._pullType&&(t.scroll.stopBounce(),setTimeout(function(){var e=a["on"+n._pullType];"string"==typeof e&&(e=i[e]),e?e.call(i,n._onPullEnd):n._onPullEnd()},400))},onAppStart:function(){var e=n.styleSheets[0];e.addRule("#J_pullRefresh, #J_pullUpdate",["visibility: hidden;","width: 100%;","padding: 10px;","height: "+o+"px;","line-height: 30px;","box-sizing: border-box;","background-color: #FFF;","font-size: 12px;","color: #999;"].join(""))},onPageDefine:function(e,t){e.scroll={bounceTop:t.onPullDown?o:0,bounceBottom:t.onPullUp?o:0}},onPageStartup:function(e,t){e.el.innerHTML=(t.onPullDown?'<section id="J_pullRefresh"><span>下拉可刷新</span></section>':"")+'<section id="J_pullContent"></section>'+(t.onPullUp?'<section id="J_pullUpdate"><span>上拉可加载更多</span></section>':""),e.el=e.el.querySelector("#J_pullContent")},onPageShow:function(e,n){"J_pullContent"!==e.el.getAttribute("id")&&(e.el=e.el.querySelector("#J_pullContent")),this._page=e,this._options=n,this._pullType=!1,n.onPullDown&&t.scroll.addEventListener("pulldown",this,!1),n.onPullUp&&t.scroll.addEventListener("pullup",this,!1),t.scroll.addEventListener("panstart",this,!1),t.scroll.addEventListener("panend",this,!1)},onPageHide:function(e,n){n.onPullDown&&t.scroll.removeEventListener("pulldown",this,!1),n.onPullUp&&t.scroll.removeEventListener("pullup",this,!1),t.scroll.removeEventListener("panstart",this,!1),t.scroll.removeEventListener("panend",this,!1)}}})(window,window.app);