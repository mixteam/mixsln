(function(e,t){var n,i,o,a,r=e.document,l=t.module.Transition,s=t.module.Scroll,c=t.module.Navigation.instance,u=c.getStack(),p=t.config,f=[];t.extendView({name:"slideview",slideIn:function(){var e=this,c=document.createElement("div"),u=f[f.length-1];if(c.style.cssText="z-index:"+(f.length+1e3)+";position:absolute;width:100%;height:100%;left:0;top:0;background:#FFF;",c.appendChild(this.el),i.appendChild(c),0===f.length){var d=0,h=r.body.getBoundingClientRect().height;p.enableNavbar&&(d=p.enableNavbar.wrapEl.getBoundingClientRect().height),p.enableScroll&&(h=window.innerHeight),i.style.height=h-d+"px",i.style.top=d+window.scrollY+"px",i.style.display="";var g=i.getBoundingClientRect();o=g.width,a=g.height}f.push({lastHeader:{title:n.pageMeta.title,buttons:n.pageMeta.buttons},wrap:c,view:this}),t.navigation.resetNavbar(),l.slide(c,"RI",o,function(){u&&(u.wrap.style.display="none"),t.navigation.setButton({type:"back",text:"返回",handler:function(){e.slideOut()}}),e.el.getBoundingClientRect().height>a&&s.enable(e.el),e.show&&e.show()})},slideOut:function(){var e=this,n=f.pop(),a=n.wrap,r=n.lastHeader,c=f[f.length-1];c&&(c.wrap.style.display=""),l.slide(a,"RO",o,function(){s.disable(n.view.el),i.removeChild(a),e.hide&&e.hide(),t.navigation.resetNavbar(),t.navigation.setTitle(r.title),t.navigation.setButton(r.buttons),0===f.length&&(i.style.display="none")})},close:function(){var e=f.pop(),n=e.wrap;l.slide(n,"RO",o,function(){for(;f.length;)e=f.pop(),e.view.hide&&e.view.hide();var n=e.lastHeader;t.navigation.resetNavbar(),t.navigation.setTitle(n.title),t.navigation.setButton(n.buttons),i.innerHTML="",i.style.display="none"})}}),t.plugin.slideview={onAppStart:function(){i=document.createElement("div"),i.style.cssText="z-index:999;display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0);overflow:hidden;",r.body.appendChild(i)},onNavigationSwitch:function(){if(f.length&&n){var e=f.shift();n.pageMeta.title=e.lastHeader.title,n.pageMeta.buttons=e.lastHeader.buttons,i.innerHTML="",i.style.display="none"}n=u.getState()}}})(window,window.app);