!function(a,b){var c,d,e,f,g=a.document,h=b.module.Transition,i=b.module.Scroll,j=b.module.Navigation.instance,k=j.getStack(),l=b.config,m=[];b.extendView({name:"slideview",slideIn:function(){var a=this,j=document.createElement("div"),k=m[m.length-1];if(j.style.cssText="z-index:"+(m.length+1e3)+";position:absolute;width:100%;height:100%;left:0;top:0;background:#FFF;",j.appendChild(this.el),d.appendChild(j),0===m.length){var n=0,o=g.body.getBoundingClientRect().height;l.enableNavbar&&(n=l.enableNavbar.wrapEl.getBoundingClientRect().height),l.enableScroll&&(o=window.innerHeight),d.style.height=o-n+"px",d.style.top=n+window.scrollY+"px",d.style.display="";var p=d.getBoundingClientRect();e=p.width,f=p.height}m.push({lastHeader:{title:c.pageMeta.title,buttons:c.pageMeta.buttons},wrap:j,view:this}),b.navigation.resetNavbar(),h.slide(j,"RI",e,function(){k&&(k.wrap.style.display="none"),b.navigation.setButton({type:"back",text:"返回",handler:function(){a.slideOut()}}),a.el.getBoundingClientRect().height>f&&i.enable(a.el),a.show&&a.show()})},slideOut:function(){var a=this,c=m.pop(),f=c.wrap,g=c.lastHeader,j=m[m.length-1];j&&(j.wrap.style.display=""),h.slide(f,"RO",e,function(){i.disable(c.view.el),d.removeChild(f),a.hide&&a.hide(),b.navigation.resetNavbar(),b.navigation.setTitle(g.title),b.navigation.setButton(g.buttons),0===m.length&&(d.style.display="none")})},close:function(){var a=m.pop(),c=a.wrap;h.slide(c,"RO",e,function(){for(;m.length;)a=m.pop(),a.view.hide&&a.view.hide();var c=a.lastHeader;b.navigation.resetNavbar(),b.navigation.setTitle(c.title),b.navigation.setButton(c.buttons),d.innerHTML="",d.style.display="none"})}}),b.plugin.slideview={onAppStart:function(){d=document.createElement("div"),d.style.cssText="z-index:999;display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0);overflow:hidden;",g.body.appendChild(d)},onNavigationSwitch:function(){if(m.length&&c){var a=m.shift();c.pageMeta.title=a.lastHeader.title,c.pageMeta.buttons=a.lastHeader.buttons,d.innerHTML="",d.style.display="none"}c=k.getState()}}}(window,window.app);